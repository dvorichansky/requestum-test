"use strict";var t={entities:null,totalData:0,totalCurrent:document.querySelectorAll(".product-list-item").length},e={productPageNumber:2,productQuantity:4},o={prodLoadMore:document.getElementById("prodLoadMore"),productList:document.getElementById("productList")};function i(){if(t.totalData!==t.totalCurrent){var i=e.productPageNumber,s=e.productQuantity,c=new XMLHttpRequest;c.open("GET","".concat("/list.php","?page=").concat(i,"&per_page=").concat(s),!0),c.send(),c.onreadystatechange=function(){if(4!=this.readyState){var i=JSON.parse(c.responseText);return t.entities=i.entities,t.totalCurrent+=t.entities.length,t.totalData=i.total,e.productPageNumber++,void(o.prodLoadMore.classList.contains("load")&&(n(),o.prodLoadMore.classList.remove("load"),o.prodLoadMore.disabled=!1))}200==this.status||alert("ошибка: "+(this.status?this.statusText:"запрос не удался"))}}else o.prodLoadMore.remove()}function n(){t.entities.forEach(function(t){o.productList.insertAdjacentHTML("beforeEnd",'\n          <div class="product-list-item product-pre-animation">\n            <div class="product-list-item__picture">\n              <img src="'.concat(t.img,'" alt="').concat(t.title,'">\n              ').concat(t.new?'<div class="product-list-item__sprite-new">NEW</div>':"","\n              ").concat(t.discountCost?'<div class="product-list-item__sprite-discount">SALE</div>':"",'\n            </div>\n            <div class="product-list-item__delineation">\n              <h3 class="product-list-item__title">').concat(t.title,'</h3>\n              <p class="product-list-item__description">').concat(t.description,'</p>\n            </div>\n            <div class="product-list-item__cost">\n              ').concat(t.discountCost?'<div class="product-list-item__cost-discount">$'.concat(t.discountCost,"</div>"):"",'  \n              <div class="product-list-item__cost-current">$').concat(t.cost,'</div>                  \n            </div>\n            <div class="product-list-item__operation">\n              <button class="btn btn-bright product-list-item__add">ADD TO CART</button>\n              <button class="btn btn-faint product-list-item__view">VIEW</button>\n            </div>\n          </div>\n          ')),setTimeout(function(){document.querySelectorAll(".product-list-item").forEach(function(t){t.classList.remove("product-pre-animation")})},100)}),t.entities=null,i()}o.prodLoadMore.addEventListener("click",function(){t.entities?n():(o.prodLoadMore.classList.add("load"),o.prodLoadMore.disabled=!0)}),document.addEventListener("DOMContentLoaded",i);